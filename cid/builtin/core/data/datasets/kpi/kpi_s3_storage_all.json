{
    "DataSetId": "07c385e2-a43c-401c-abf4-fd54baed26a2",
    "Name": "kpi_s3_storage_all",
    "PhysicalTableMap": {
        "99dd8380-97f3-4a26-b32c-79446aafb95e": {
            "RelationalTable": {
                "DataSourceArn": "${athena_datasource_arn}",
                "Schema": "${athena_database_name}",
                "Name": "kpi_s3_storage_all",
                "InputColumns": [
                    {
                        "Name": "billing_period",
                        "Type": "DATETIME"
                    },
                    {
                        "Name": "usage_date",
                        "Type": "DATETIME"
                    },
                    {
                        "Name": "payer_account_id",
                        "Type": "STRING"
                    },
                    {
                        "Name": "linked_account_id",
                        "Type": "STRING"
                    },
                    {
                        "Name": "resource_id",
                        "Type": "STRING"
                    },
                    {
                        "Name": "bucket_name_keywords",
                        "Type": "STRING"
                    },
                    {
                        "Name": "last_requests",
                        "Type": "DATETIME"
                    },
                    {
                        "Name": "s3_standard_underutilized_optimization",
                        "Type": "STRING"
                    },
                    {
                        "Name": "s3_replication_bucket_optimization",
                        "Type": "STRING"
                    },
                    {
                        "Name": "s3_standard_only_bucket",
                        "Type": "STRING"
                    },
                    {
                        "Name": "s3_archive_in_use",
                        "Type": "STRING"
                    },
                    {
                        "Name": "s3_inventory_in_use",
                        "Type": "STRING"
                    },
                    {
                        "Name": "s3_analytics_in_use",
                        "Type": "STRING"
                    },
                    {
                        "Name": "s3_int_in_use",
                        "Type": "STRING"
                    },
                    {
                        "Name": "s3_standard_storage_potential_savings",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_all_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_all_storage_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_all_storage_usage_quantity",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_standard_storage_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_standard_storage_usage_quantity",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_intelligent-tiering_storage_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_intelligent-tiering_storage_usage_quantity",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_standard-ia_storage_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_standard-ia_storage_usage_quantity",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_standard-ia_tier1_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_standard-ia_tier2_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_standard-ia_retrieval_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_onezone-ia_storage_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_onezone-ia_storage_usage_quantity",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_reduced_redundancy_storage_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_reduced_redundancy_storage_usage_quantity",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_glacier_instant_retrieval_storage_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_glacier_instant_retrieval_storage_usage_quantity",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_glacier_instant_retrieval_tier1_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_glacier_instant_retrieval_tier2_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_glacier_instant_retrieval_retrieval_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_glacier_flexible_retrieval_storage_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_glacier_flexible_retrieval_storage_usage_quantity",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_glacier_deep_archive_storage_storage_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_glacier_deep_archive_storage_usage_quantity",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_early_delete_cost",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_transition_usage_quantity",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_put_object_usage_quantity",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_put_object_replication_usage_quantity",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_get_object_usage_quantity",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    },
                    {
                        "Name": "s3_copy_object_usage_quantity",
                        "Type": "DECIMAL",
                        "SubType": "FLOAT"
                    }
                ]
            }
        },
        "a6f3d2ae-e474-4b5a-9bd2-ab3787318351": {
            "RelationalTable": {
                "DataSourceArn": "${athena_datasource_arn}",
                "Catalog": "AwsDataCatalog",
                "Schema": "${athena_database_name}",
                "Name": "account_map",
                "InputColumns": [
                    {
                        "Name": "account_id",
                        "Type": "STRING"
                    },
                    {
                        "Name": "account_name",
                        "Type": "STRING"
                    }
                ]
            }
        }
    },
    "LogicalTableMap": {
        "1538482f-e4d7-499d-b960-d0de2ad36293": {
            "Alias": "Intermediate Table",
            "DataTransforms": [
                {
                    "ProjectOperation": {
                        "ProjectedColumns": [
                            "billing_period",
                            "usage_date",
                            "payer_account_id",
                            "linked_account_id",
                            "resource_id",
                            "bucket_name_keywords",
                            "last_requests",
                            "s3_standard_underutilized_optimization",
                            "s3_replication_bucket_optimization",
                            "s3_standard_only_bucket",
                            "s3_archive_in_use",
                            "s3_inventory_in_use",
                            "s3_analytics_in_use",
                            "s3_int_in_use",
                            "s3_standard_storage_potential_savings",
                            "s3_all_cost",
                            "s3_all_storage_cost",
                            "s3_all_storage_usage_quantity",
                            "s3_standard_storage_cost",
                            "s3_standard_storage_usage_quantity",
                            "s3_intelligent-tiering_storage_cost",
                            "s3_intelligent-tiering_storage_usage_quantity",
                            "s3_standard-ia_storage_cost",
                            "s3_standard-ia_storage_usage_quantity",
                            "s3_standard-ia_tier1_cost",
                            "s3_standard-ia_tier2_cost",
                            "s3_standard-ia_retrieval_cost",
                            "s3_onezone-ia_storage_cost",
                            "s3_onezone-ia_storage_usage_quantity",
                            "s3_reduced_redundancy_storage_cost",
                            "s3_reduced_redundancy_storage_usage_quantity",
                            "s3_glacier_instant_retrieval_storage_cost",
                            "s3_glacier_instant_retrieval_storage_usage_quantity",
                            "s3_glacier_instant_retrieval_tier1_cost",
                            "s3_glacier_instant_retrieval_tier2_cost",
                            "s3_glacier_instant_retrieval_retrieval_cost",
                            "s3_glacier_flexible_retrieval_storage_cost",
                            "s3_glacier_flexible_retrieval_storage_usage_quantity",
                            "s3_glacier_deep_archive_storage_storage_cost",
                            "s3_glacier_deep_archive_storage_usage_quantity",
                            "s3_early_delete_cost",
                            "s3_transition_usage_quantity",
                            "s3_put_object_usage_quantity",
                            "s3_put_object_replication_usage_quantity",
                            "s3_get_object_usage_quantity",
                            "s3_copy_object_usage_quantity",
                            "account_id",
                            "account_name"
                        ]
                    }
                }
            ],
            "Source": {
                "JoinInstruction": {
                    "LeftOperand": "99dd8380-97f3-4a26-b32c-79446aafb95e",
                    "RightOperand": "33527e6a-4aa0-4e44-abff-3d4974ad382b",
                    "Type": "LEFT",
                    "OnClause": "{linked_account_id} = {account_id}"
                }
            }
        },
        "33527e6a-4aa0-4e44-abff-3d4974ad382b": {
            "Alias": "account_map",
            "Source": {
                "PhysicalTableId": "a6f3d2ae-e474-4b5a-9bd2-ab3787318351"
            }
        },
        "99dd8380-97f3-4a26-b32c-79446aafb95e": {
            "Alias": "kpi_s3_storage_all",
            "Source": {
                "PhysicalTableId": "99dd8380-97f3-4a26-b32c-79446aafb95e"
            }
        }
    },
    "ImportMode": "SPICE",
    "Permissions": []
}
